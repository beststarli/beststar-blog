---
title: React为什么侧重于纯函数
sidebar_position: 7
tags: [React]
date: 2025-11-17
---

编写纯函数需要遵循一些习惯和规程：
- 组件可以在不同的环境下运行，例如在服务器上，由于它们针对相同的输入，总是返回相同的结果，因此一个组件可以满足多个用户请求。
- 可以为那些输入未更改的组件来跳过渲染以提高性能。这是安全的做法，因为纯函数总是返回相同的结果，所以可以安全地缓存它们。
- 如果在渲染深层组件树的过程中某些数据发生了变化，React可以重新开始渲染，而不会浪费时间完成过时的渲染。纯粹性使得它随时可以安全地停止计算。

在渲染过程中如果组件改变了**预先存在的**变量的值，就会发生mutation突变现象，纯函数不会改变函数作用域外的变量、或在函数调用前创建的对象——这会使函数变得不纯粹！但是我们可以在渲染时更改**刚刚**创建的变量和对象。

函数式编程在很大程度上依赖于纯函数，但某些事物在特定情况下不得不发生改变。这是编程的要义！这些变动包括更新屏幕、启动动画、更改数据等，它们被称为**副作用**。它们是**额外**发生的事情，与渲染过程无关。

在React中，副作用通常属于**事件处理程序**。事件处理程序是React在你执行某些操作（如单击按钮）时运行的函数。即使事件处理程序是在组件**内部**定义的，它们也不会在渲染期间运行！**因此事件处理程序无需是纯函数**。

如果用尽一切办法仍无法为副作用找到合适的事件处理程序，还可以调用组件中的useEffect方法将其附加到返回的JSX中。这会告诉React在渲染结束后执行它。**然而，这种方法应是最后的手段**。