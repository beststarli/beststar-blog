---
title: 什么是跨域？
sidebar_position: 2
tags: [Web]
date: 2025-11-28
---

# 什么是跨域？

## 概念
**跨域（Cross-Origin）** 是 Web 开发中的一个核心概念，主要指浏览器在处理HTTP请求时，对不同“源”（origin）的资源访问施加的限制。这源于浏览器的**同源策略（Same-Origin Policy）**，目的是防止恶意网站通过脚本窃取用户数据（如cookie、localStorage），从而提升Web应用的整体安全性。

## 同源策略的基本规则
### 源（Origin）的定义
一个源由三个部分组成——**协议（protocol）**、**主机（hostname）**和**端口（port）**。只有当这些三者完全相同，才视为“同源”。
示例：
- `https://example.com:443`（同源）
- `https://example.com:80`（不同端口 → 跨域）
- `http://example.com`（不同协议 → 跨域）
- `https://sub.example.com`（不同主机 → 跨域）

### 跨域的触发
当一个网页的脚本（JavaScript）试图访问另一个源的资源（如AJAX请求、iframe加载、WebSocket等）时，浏览器会阻塞或限制该操作，除非目标服务器明确允许（通过CORS等机制）。

## 常见跨域场景示例

| 场景            | 同源示例                                    | 跨域示例                                       | 浏览器行为                                     |
| --------------- | ------------------------------------------- | ---------------------------------------------- | ---------------------------------------------- |
| **AJAX 请求**   | 从 `https://a.com` 请求 `https://a.com/api` | 从 `https://a.com` 请求 `https://b.com/api`    | 阻塞响应数据，控制台报 CORS 错误               |
| **Cookie 访问** | `https://a.com` 读取自己的 cookie           | `https://a.com` 读取 `https://b.com` 的 cookie | 完全禁止                                       |
| **Iframe 嵌入** | 嵌入同域 iframe                             | 嵌入跨域 iframe                                | 限制父子窗口间的脚本交互（postMessage 可绕过） |
| **表单提交**    | 提交到同域                                  | 提交到跨域                                     | 允许提交，但响应无法被脚本读取                 |

## 如何解决跨域问题？
### 服务器端
使用**CORS（Cross-Origin Resource Sharing）** 头（如 Access-Control-Allow-Origin: *）允许特定源访问。

### 客户端
JSONP（旧方法，不推荐）、代理服务器（如 Nginx 反代）、postMessage API 等。

### 现代实践
在开发中常用代理工具（如 Webpack Dev Server 的 proxy）模拟解决。